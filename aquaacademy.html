<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Atlantis Academy</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Styles & Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700" rel="stylesheet">
<style>
body {
  font-family: 'Roboto', sans-serif;
  margin: 0;
  color: #e0f7fa;
  display: flex;
  flex-direction: column;
  min-height:100vh;
  overflow: hidden;
  position: relative;
  background: linear-gradient(135deg, #003844 30%, #006064 100%);
}
.water {
  position:absolute;
  top:0;
  left:0;
  width:100%; 
  height:100%; 
  background: rgba(0,150,136,.3);
  animation: wave 6s infinite linear;
  z-index:0;
}
@keyframes wave {
  0% {transform: translateY(0);}
  50% {transform: translateY(10px);}
  100%{transform: translateY(0);}
}
header {
  background: rgba(0,56,68,.9);
  color:#ffcc80;
  padding:20px;
  text-align:center;
  position:relative;
  z-index:1;
}
nav {
  background: rgba(0,77,64,.95);
  color:#e0f7fa;
  padding:15px;
  display:flex;
  justify-content:space-around;
  box-shadow:0 2px 5px rgba(0,0,0,.3);
  z-index:1;
}
nav button {
  background:transparent;
  border:none;
  color:#e0f7fa;
  cursor:pointer;
  font-weight:500;
  transition:background .3s;
}
nav button:hover {
  background:rgba(255,204,128,.2);
}
.container {
  padding:20px;
  flex:1;
  display:none;
  border-radius:8px;
  box-shadow:0 2px 10px rgba(0,0,0,.3);
  background:rgba(255,255,255,.95);
  color:#004d40;
  margin:20px;
  animation:fadeIn .5s;
  z-index:1;
}
.active {
  display:block;
}
input,select {
  padding:10px;
  margin:10px 0;
  border-radius:5px;
  border:1px solid #00796b;
  width:100%;
  box-sizing:border-box;
}
input:focus,select:focus {
  border-color:#ffcc80;
  outline:none;
}
button {
  padding:10px;
  margin:10px 0;
  border-radius:5px;
  border:none;
  background:#00796b;
  color:#fff;
  cursor:pointer;
  transition:background .3s, transform .2s;
  width:100%; 
}
button:hover {
  background:#ff8f00;
  transform:scale(1.03);
}
.error {
  color:#ff5722;
  margin:10px 0;
}
.spinner {
  display:none;
  margin:20px auto;
  text-align:center;
}
.dark-mode {
  background:#001f24;
  color:#e0f7fa;
}
footer {
  text-align:center;
  padding:10px;
  background:#004d40;
  color:#ffcc80;
  position:relative;
  bottom:0;
  width:100%; 
  z-index:1;
}
@keyframes fadeIn {
  from{opacity:0;}
  to{opacity:1;}
}

/* ==========================
    STYLING LEADERBOARD
========================== */
#allLeaderboards {
  max-height: 450px;
  overflow-y: auto;
  padding: 10px;
}
.leaderboard-subject {
  margin-bottom: 30px;
}
.leaderboard-subject h4,
.leaderboard-subject h3 {
  text-align: left;
  font-size: 1.2em;
  color: #ffcc80;
  font-weight: 600;
  border-bottom: 2px solid #ffcc80;
  padding-bottom: 5px;
  margin: 15px 0 5px;
}
.leaderboard-subject table {
  width:100%;
  border-collapse: collapse;
  margin-bottom:15px;
}
.leaderboard-subject table thead {
  background-color:#006064;
  color:#ffcc80;
}
.leaderboard-subject table th,
.leaderboard-subject table td {
  padding:10px 14px;
  border:1px solid #004d40;
  text-align:left;
}
.leaderboard-subject table tr:nth-child(odd) {
  background-color:#e0f2f1;
}
.leaderboard-subject table tr:nth-child(even) {
  background-color:#b2dfdb;
}
</style>

<!-- Firebase Scripts -->
<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>
</head>
<body>
<div class="water"></div>
<header><h1>Atlantis Academy</h1></header>

<!-- Login Screen -->
<div id="loginScreen" class="container active">
    <h2>Login</h2>
    <input type="email" id="loginEmail" placeholder="Email (@atlantis.student.com)">
    <input type="password" id="loginPassword" placeholder="Password">
    <div id="loginError" class="error"></div>
    <button id="loginButton">Login</button>
    <div>Don't have an account? <a href="#" id="showRegisterLink">Register here</a></div>
</div>

<!-- Registration Screen -->
<div id="registerScreen" class="container">
    <h2>Register</h2>
    <input type="text" id="name" placeholder="Name">
    <input type="email" id="registerEmail" placeholder="Email (@atlantis.student.com)">
    <select id="educationLevel">
        <option value="">Select Education Level</option>
        <option value="SD">SD</option>
        <option value="SMP">SMP</option>
        <option value="SMA">SMA</option>
    </select>
    <input type="password" id="registerPassword" placeholder="Password">
    <input type="password" id="confirmPassword" placeholder="Confirm Password">
    <div id="registerError" class="error"></div>
    <button id="registerButton">Register</button>
    <div>Already have an account? <a href="#" id="showLoginLink">Back to Login</a></div>
</div>

<!-- Main Dashboard -->
<div id="dashboard" class="container">
    <nav>
        <button data-page="profilePage">Profile</button>
        <button data-page="materialsPage">Materials</button>
        <button data-page="exercisesPage">Exercises</button>
        <button data-page="leaderboardsPage">Leaderboards</button>
        <button id="logoutButton">Quit</button>
        <button id="toggleDarkMode">Toggle Dark Mode</button>
    </nav>
    <div id="profilePage" class="container active">
        <h3>Profile</h3>
        <div id="profileInfo"></div>
        <button id="changePasswordButton">Change Password</button>
    </div>
    <div id="materialsPage" class="container">
        <h3>Materials</h3>
        <ul>
            <li>Physics: <a href="https://url-to-your-physics.pdf" target="_blank">Download</a></li>
            <li>Chemistry: <a href="https://url-to-your-chemistry.pdf" target="_blank">Download</a></li>
            <li>Biology: <a href="https://url-to-your-biology.pdf" target="_blank">Download</a></li>
            <li>Indonesian: <a href="https://url-to-your-indonesian.pdf" target="_blank">Download</a></li>
            <li>English: <a href="https://url-to-your-english.pdf" target="_blank">Download</a></li>
            <li>Math: <a href="https://url-to-your-math.pdf" target="_blank">Download</a></li>
        </ul>
    </div>
    <div id="exercisesPage" class="container">
        <h3>Exercises</h3>
        <div id="subjectSelector">
            <select id="subjectSelect">
                <option value="">Pilih Mata Pelajaran</option>
                <option value="physics">Physics</option>
                <option value="chemistry">Chemistry</option>
                <option value="biology">Biology</option>
                <option value="indonesian">Indonesian</option>
                <option value="english">English</option>
                <option value="math">Math</option>
            </select>
            <button id="startExercise">Mulai</button>
        </div>
        <div id="questionDisplay"></div>
    </div>
    <div id="leaderboardsPage" class="container">
        <h3>Leaderboards</h3>
        <div id="allLeaderboards"></div>
    </div>
</div>

<div class="spinner" id="loadingSpinner">Loading...</div>

<!-- Scripts Logic -->
<script>
const firebaseConfig = {
    apiKey: "AIzaSyDR04p3qXOTTOp9OEwz-m-M46j5x2FKuKM",
    authDomain: "dungeon-223d9.firebaseapp.com",
    databaseURL: "https://dungeon-223d9-default-rtdb.asia-southeast1.firebasedatabase.app",
    projectId: "dungeon-223d9",
    storageBucket: "dungeon-223d9.firebasestorage.app",
    messagingSenderId: "144074668480",
    appId: "1:144074668480:web:a26bbacfa551112b15f025"
};
firebase.initializeApp(firebaseConfig);

const auth = firebase.auth();
const db = firebase.database();

// State
let currentUser = null;
let currentSubject = '';
let currentQuestionIndex = 0;
let userScore = 0;

const questions = {
  SD: {
    physics: [
      {q: "Benda yang dapat menghantarkan listrik disebut?", options: ["Isolator", "Konduktor", "Gas", "Cairan"], answer: "Konduktor"},
      {q: "Gaya gravitasi membuat benda bergerak ke arah?", options: ["Atas", "Bawah", "Kanan", "Kiri"], answer: "Bawah"},
      {q: "Energi dari matahari disebut energi?", options: ["Kinetik", "Panas", "Bunyi", "Listrik"], answer: "Panas"},
      {q: "Alat untuk mengukur suhu disebut?", options: ["Penggaris", "Termometer", "Neraca", "Mikroskop"], answer: "Termometer"},
      {q: "Benda yang dapat berubah bentuk jika ditekan disebut?", options: ["Benda Keras", "Benda Lentur", "Benda Padat", "Benda Cair"], answer: "Benda Lentur"},
      {q: "Saat bola dilempar ke atas, bola bergerak karena?", options: ["Energi Kinetik", "Energi Panas", "Energi Listrik", "Energi Bunyi"], answer: "Energi Kinetik"},
      {q: "Benda dapat bergerak karena dikenai?", options: ["Gaya", "Panas", "Bunyi", "Cahaya"], answer: "Gaya"},
      {q: "Saat lampu menyala, energi listrik berubah menjadi energi?", options: ["Panas dan Cahaya", "Kinetik", "Bunyi", "Kimia"], answer: "Panas dan Cahaya"},
      {q: "Saat sepeda dikayuh, energi yang digunakan adalah?", options: ["Energi Kimia", "Energi Bunyi", "Energi Kinetik", "Energi Listrik"], answer: "Energi Kinetik"},
      {q: "Saat benda dijatuhkan dari ketinggian, energi berubah dari?", options: ["Kinetik ke Potensial", "Potensial ke Kinetik", "Listrik ke Panas", "Kimia ke Bunyi"], answer: "Potensial ke Kinetik"},
      {q: "Benda yang tidak bisa menghantarkan listrik disebut?", options: ["Konduktor", "Isolator", "Logam", "Kabel"], answer: "Isolator"},
      {q: "Energi yang menyebabkan benda bergerak disebut?", options: ["Energi Kinetik", "Energi Panas", "Energi Bunyi", "Energi Potensial"], answer: "Energi Kinetik"},
      {q: "Alat untuk melihat benda kecil disebut?", options: ["Teleskop", "Kaca Pembesar", "Mikroskop", "Lup"], answer: "Mikroskop"},
      {q: "Contoh gaya otot ditunjukkan saat?", options: ["Mengangkat tas", "Menyetrika baju", "Menyanyi", "Menonton TV"], answer: "Mengangkat tas"},
      {q: "Gaya dapat mengubah?", options: ["Warna benda", "Bentuk dan arah gerak", "Jenis benda", "Ukuran molekul"], answer: "Bentuk dan arah gerak"},
      {q: "Energi listrik bisa diubah menjadi?", options: ["Energi panas", "Energi gravitasi", "Energi magnet", "Energi massa"], answer: "Energi panas"},
      {q: "Benda padat memiliki bentuk yang?", options: ["Tetap", "Berubah-ubah", "Mengalir", "Mengembang"], answer: "Tetap"},
      {q: "Benda cair jika dipindahkan ke wadah lain bentuknya akan?", options: ["Tetap", "Mengalir", "Menyesuaikan wadah", "Mengembang"], answer: "Menyesuaikan wadah"},
      {q: "Matahari adalah sumber energi?", options: ["Bunyi", "Kimia", "Panas dan cahaya", "Gerak"], answer: "Panas dan cahaya"},
      {q: "Kipas angin mengubah energi listrik menjadi energi?", options: ["Panas", "Bunyi", "Gerak", "Kimia"], answer: "Gerak"},
      {q: "Pelangi terjadi karena pembiasan?", options: ["Air", "Cahaya", "Udara", "Listrik"], answer: "Cahaya"},
      {q: "Cermin datar memantulkan cahaya secara?", options: ["Acak", "Lurus", "Teratur", "Menyebar"], answer: "Teratur"},
      {q: "Bunyi bisa terdengar jika ada?", options: ["Udara", "Gambar", "Warna", "Cahaya"], answer: "Udara"},
      {q: "Bunyi tidak bisa merambat melalui?", options: ["Air", "Besi", "Hampa udara", "Udara"], answer: "Hampa udara"},
      {q: "Benda yang bisa memantulkan bunyi disebut?", options: ["Konduktor", "Reflektor", "Isolator", "Penyerap"], answer: "Reflektor"},
      {q: "Contoh sumber energi alternatif adalah?", options: ["Matahari", "Minyak bumi", "Batu bara", "Gas alam"], answer: "Matahari"},
      {q: "Panel surya digunakan untuk mengubah energi matahari menjadi?", options: ["Panas", "Gerak", "Listrik", "Kimia"], answer: "Listrik"},
      {q: "Bayangan di cermin datar bersifat?", options: ["Tegak dan sama besar", "Tegak dan terbalik", "Tegak dan lebih kecil", "Tegak dan lebih besar"], answer: "Tegak dan sama besar"},
      {q: "Saat berlari, tubuh menggunakan energi dari?", options: ["Panas", "Makanan", "Cahaya", "Bunyi"], answer: "Makanan"},
      {q: "Benda yang digunakan untuk menimbang massa adalah?", options: ["Penggaris", "Jam", "Timbangan", "Meteran"], answer: "Timbangan"}
    ],
    chemistry: [
      {q: "Air termasuk contoh zat berwujud?", options: ["Padat", "Cair", "Gas", "Api"], answer: "Cair"},
      {q: "Contoh perubahan wujud dari cair ke gas disebut?", options: ["Mengembun", "Menguap", "Menyublim", "Meleleh"], answer: "Menguap"},
      {q: "Bahan yang dapat menghantarkan panas disebut?", options: ["Konduktor", "Isolator", "Plastik", "Karet"], answer: "Konduktor"},
      {q: "Gas yang digunakan tumbuhan untuk fotosintesis?", options: ["Oksigen", "Hidrogen", "Karbondioksida", "Nitrogen"], answer: "Karbondioksida"},
      {q: "Contoh zat asam dalam rumah tangga?", options: ["Gula", "Garam", "Cuka", "Sabun"], answer: "Cuka"},
      {q: "Perubahan wujud dari padat ke cair disebut?", options: ["Membeku", "Menguap", "Meleleh", "Menyublim"], answer: "Meleleh"},
      {q: "Benda yang tidak dapat kembali ke bentuk asal setelah dibakar disebut?", options: ["Perubahan Fisika", "Perubahan Kimia", "Perubahan Bentuk", "Perubahan Ukuran"], answer: "Perubahan Kimia"},
      {q: "Air laut rasanya asin karena mengandung?", options: ["Gula", "Garam", "Cuka", "Asam"], answer: "Garam"},
      {q: "Campuran antara air dan kopi disebut?", options: ["Larutan", "Zat tunggal", "Gas", "Padat"], answer: "Larutan"},
      {q: "Benda yang mudah terbakar disebut?", options: ["Konduktor", "Inflamabel", "Isolator", "Dingin"], answer: "Inflamabel"},
      {q: "Benda padat jika dipanaskan bisa?", options: ["Mengalir", "Mengendap", "Meleleh", "Menguap"], answer: "Meleleh"},
      {q: "Zat yang tidak bisa diuraikan lagi disebut?", options: ["Senya", "Unsur", "Campuran", "Larutan"], answer: "Unsur"},
      {q: "Contoh zat yang larut dalam air?", options: ["Minyak", "Pasir", "Gula", "Batu"], answer: "Gula"},
      {q: "Alat untuk memisahkan campuran dengan saringan disebut?", options: ["Corong pisah", "Penyaring", "Mikroskop", "Kompor"], answer: "Penyaring"},
      {q: "Proses pemisahan garam dari air laut disebut?", options: ["Penyaringan", "Penguapan", "Penyubliman", "Destilasi"], answer: "Penguapan"},
      {q: "Wujud benda yang bentuk dan volumenya tetap adalah?", options: ["Gas", "Padat", "Cair", "Plasma"], answer: "Padat"},
      {q: "Sifat dari gas adalah?", options: ["Bentuk tetap", "Volume tetap", "Mengisi ruang", "Mengalir ke bawah"], answer: "Mengisi ruang"},
      {q: "Contoh perubahan fisika adalah?", options: ["Kertas dibakar", "Air membeku", "Kayu dibakar", "Besi berkarat"], answer: "Air membeku"},
      {q: "Apa yang terjadi saat air dipanaskan?", options: ["Membeku", "Menguap", "Mengendap", "Mengental"], answer: "Menguap"},
      {q: "Air, udara, dan garam termasuk?", options: ["Zat tunggal", "Zat majemuk", "Campuran", "Asam"], answer: "Campuran"},
      {q: "Campuran yang bisa dipisahkan dengan magnet contohnya?", options: ["Pasir dan air", "Besi dan pasir", "Garam dan air", "Gula dan kopi"], answer: "Besi dan pasir"},
      {q: "Campuran homogen disebut juga?", options: ["Campuran kasar", "Larutan", "Suspensi", "Emulsi"], answer: "Larutan"},
      {q: "Contoh pelarut yang sering digunakan adalah?", options: ["Minyak", "Air", "Pasir", "Alkohol"], answer: "Air"},
      {q: "Zat yang tidak larut disebut?", options: ["Larutan", "Zat pelarut", "Endapan", "Campuran"], answer: "Endapan"},
      {q: "Suhu mempengaruhi cepat tidaknya zat?", options: ["Menguap", "Membeku", "Mencair", "Semua benar"], answer: "Semua benar"},
      {q: "Kapur tulis terbuat dari bahan kimia apa?", options: ["Kalsium karbonat", "Sodium klorida", "Hidrogen", "Karbon dioksida"], answer: "Kalsium karbonat"},
      {q: "Zat aditif pada makanan fungsinya untuk?", options: ["Membuat rasa pahit", "Membusukkan", "Membuat awet", "Membuat lengket"], answer: "Membuat awet"},
      {q: "Sabun bersifat?", options: ["Asam", "Netral", "Basa", "Logam"], answer: "Basa"},
      {q: "Cuka bersifat?", options: ["Asam", "Netral", "Basa", "Padat"], answer: "Asam"},
      {q: "Garam dapur termasuk jenis senyawa?", options: ["Ionik", "Kovalen", "Organik", "Gas"], answer: "Ionik"}
    ],
    biology: [
      {q: "Bagian tumbuhan yang berfungsi menyerap air dari tanah adalah?", options: ["Akar", "Batang", "Daun", "Bunga"], answer: "Akar"},
      {q: "Organ pernapasan manusia adalah?", options: ["Jantung", "Hati", "Paru-paru", "Lambung"], answer: "Paru-paru"},
      {q: "Hewan yang berkembang biak dengan bertelur disebut?", options: ["Vivipar", "Ovipar", "Ovovivipar", "Mamalia"], answer: "Ovipar"},
      {q: "Tumbuhan hijau dapat membuat makanan sendiri melalui proses?", options: ["Respirasi", "Fotosintesis", "Transpirasi", "Fermentasi"], answer: "Fotosintesis"},
      {q: "Bagian tubuh manusia yang berfungsi memompa darah adalah?", options: ["Paru-paru", "Lambung", "Jantung", "Ginjal"], answer: "Jantung"},
      {q: "Bagian tumbuhan yang berfungsi untuk fotosintesis adalah?", options: ["Akar", "Batang", "Daun", "Bunga"], answer: "Daun"},
      {q: "Makanan yang mengandung protein tinggi adalah?", options: ["Beras", "Tempe", "Gula", "Mentega"], answer: "Tempe"},
      {q: "Alat pernapasan pada ikan adalah?", options: ["Paru-paru", "Trakea", "Insang", "Kulit"], answer: "Insang"},
      {q: "Manusia termasuk makhluk hidup yang disebut?", options: ["Herbivora", "Omnivora", "Karnivora", "Produsen"], answer: "Omnivora"},
      {q: "Makhluk hidup berkembang biak untuk?", options: ["Mencari makanan", "Menjaga suhu", "Memperbanyak keturunan", "Bernapas"], answer: "Memperbanyak keturunan"},
      {q: "Bagian tumbuhan yang berfungsi membawa air dan zat hara ke daun?", options: ["Akar", "Batang", "Daun", "Bunga"], answer: "Batang"},
      {q: "Alat gerak utama manusia adalah?", options: ["Tangan", "Kepala", "Kaki", "Kulit"], answer: "Kaki"},
      {q: "Hewan yang memakan tumbuhan disebut?", options: ["Karnivora", "Omnivora", "Herbivora", "Kanibal"], answer: "Herbivora"},
      {q: "Organ yang berfungsi menyaring darah adalah?", options: ["Hati", "Jantung", "Paru-paru", "Ginjal"], answer: "Ginjal"},
      {q: "Masa pertumbuhan manusia dari bayi ke dewasa disebut?", options: ["Perkembangan", "Kematangan", "Penuaan", "Pertidaksamaan"], answer: "Perkembangan"},
      {q: "Fungsi utama tulang pada manusia adalah?", options: ["Melindungi organ tubuh", "Mengatur suhu", "Menghasilkan makanan", "Menyerap air"], answer: "Melindungi organ tubuh"},
      {q: "Hewan yang mengalami metamorfosis sempurna adalah?", options: ["Kucing", "Kupu-kupu", "Ayam", "Manusia"], answer: "Kupu-kupu"},
      {q: "Sumber energi utama bagi manusia adalah?", options: ["Air", "Protein", "Karbohidrat", "Lemak"], answer: "Karbohidrat"},
      {q: "Daun berwarna hijau karena mengandung?", options: ["Karoten", "Klorofil", "Hemoglobin", "Albumin"], answer: "Klorofil"},
      {q: "Organ pernapasan pada katak saat dewasa adalah?", options: ["Insang", "Kulit dan paru-paru", "Trakea", "Spirakel"], answer: "Kulit dan paru-paru"},
      {q: "Hewan yang menyusui anaknya disebut?", options: ["Mamalia", "Reptil", "Amfibi", "Aves"], answer: "Mamalia"},
      {q: "Tumbuhan menghasilkan oksigen saat?", options: ["Bernapas", "Berkembang biak", "Fotosintesis", "Bertumbuh"], answer: "Fotosintesis"},
      {q: "Bagian mata yang berfungsi menerima cahaya adalah?", options: ["Iris", "Kornea", "Retina", "Lensa"], answer: "Retina"},
      {q: "Siklus hidup kupu-kupu dimulai dari?", options: ["Pupa", "Imago", "Telur", "Larva"], answer: "Telur"},
      {q: "Organ pencernaan tempat pencernaan awal protein?", options: ["Usus", "Lambung", "Mulut", "Hati"], answer: "Lambung"},
      {q: "Zat makanan yang membantu pertumbuhan tulang?", options: ["Vitamin A", "Zat Besi", "Kalsium", "Protein"], answer: "Kalsium"},
      {q: "Contoh hewan vivipar adalah?", options: ["Ikan", "Kucing", "Ayam", "Katak"], answer: "Kucing"},
      {q: "Fungsi hidung dalam sistem pernapasan adalah?", options: ["Menghisap makanan", "Menyaring udara", "Menyerap cahaya", "Mengalirkan darah"], answer: "Menyaring udara"},
      {q: "Sumber vitamin A yang baik adalah?", options: ["Wortel", "Beras", "Daging", "Garam"], answer: "Wortel"},
      {q: "Makhluk hidup yang tidak dapat bergerak adalah?", options: ["Tumbuhan", "Hewan", "Manusia", "Ikan"], answer: "Tumbuhan"}
    ],
    indonesian: [
      {q: "Apa sinonim dari kata 'indah'?", options: ["Cantik", "Buruk", "Kotor", "Ribut"], answer: "Cantik"},
      {q: "Antonim dari 'besar' adalah?", options: ["Kecil", "Panjang", "Lebar", "Tinggi"], answer: "Kecil"},
      {q: "Kalimat tanya biasanya diakhiri dengan tanda?", options: ["Seru", "Titik", "Koma", "Tanya"], answer: "Tanya"},
      {q: "Kata 'berlari' termasuk jenis kata?", options: ["Benda", "Kerja", "Sifat", "Keterangan"], answer: "Kerja"},
      {q: "Kata 'merah' termasuk jenis kata?", options: ["Kerja", "Benda", "Sifat", "Bilangan"], answer: "Sifat"},
      {q: "Kata 'sepatu' termasuk jenis kata?", options: ["Kerja", "Benda", "Sifat", "Keterangan"], answer: "Benda"},
      {q: "Kalimat ajakan biasanya diawali dengan kata?", options: ["Jangan", "Mari", "Bukan", "Sudah"], answer: "Mari"},
      {q: "Kalimat 'Sinta membaca buku.' termasuk jenis kalimat?", options: ["Perintah", "Tanya", "Berita", "Ajakan"], answer: "Berita"},
      {q: "Tanda baca untuk mengakhiri kalimat perintah adalah?", options: ["Tanda Seru", "Tanda Titik", "Tanda Koma", "Tanda Tanya"], answer: "Tanda Seru"},
      {q: "Puisi terdiri atas baris dan?", options: ["Halaman", "Bab", "Paragraf", "Bait"], answer: "Bait"},
      {q: "Cerita yang berisi dongeng disebut?", options: ["Legenda", "Fabel", "Cerpen", "Novel"], answer: "Fabel"},
      {q: "Kalimat 'Ibu memasak di dapur.' memiliki predikat apa?", options: ["Ibu", "Memasak", "Di", "Dapur"], answer: "Memasak"},
      {q: "Kata depan 'ke' digunakan untuk menyatakan?", options: ["Tujuan", "Waktu", "Jumlah", "Sifat"], answer: "Tujuan"},
      {q: "Kata baku dari 'aktifitas' adalah?", options: ["Aktifitas", "Aktif", "Aktivitas", "Aktivas"], answer: "Aktivitas"},
      {q: "Kalimat 'Jangan membuang sampah sembarangan!' adalah kalimat?", options: ["Ajakan", "Larangan", "Berita", "Perintah"], answer: "Larangan"},
      {q: "Kata yang menunjukkan jumlah disebut?", options: ["Kata Kerja", "Kata Benda", "Kata Sifat", "Kata Bilangan"], answer: "Kata Bilangan"},
      {q: "Cerita yang mengandung unsur khayalan disebut?", options: ["Fabel", "Cerpen", "Dongeng", "Pantun"], answer: "Dongeng"},
      {q: "Kata 'pagi' termasuk jenis kata?", options: ["Keterangan Waktu", "Benda", "Sifat", "Kerja"], answer: "Keterangan Waktu"},
      {q: "Kata 'bermain' termasuk kata?", options: ["Sifat", "Kerja", "Benda", "Bilangan"], answer: "Kerja"},
      {q: "Sinonim dari kata 'pandai' adalah?", options: ["Bodoh", "Rajin", "Pintar", "Malas"], answer: "Pintar"},
      {q: "Kata 'dan', 'atau', 'tetapi' disebut kata?", options: ["Sambung", "Seru", "Tanya", "Perintah"], answer: "Sambung"},
      {q: "Kalimat sapaan yang benar adalah?", options: ["Hai teman.", "hai Teman", "Hai Teman", "Hai, teman."], answer: "Hai, teman."},
      {q: "Cerpen adalah singkatan dari?", options: ["Cerita Pendek", "Cerita Panjang", "Cerita Pengetahuan", "Cerita Penuh"], answer: "Cerita Pendek"},
      {q: "Kata 'menari' adalah kata kerja yang berarti?", options: ["Berjalan", "Bernyanyi", "Bergerak dengan irama", "Berlari"], answer: "Bergerak dengan irama"},
      {q: "Kalimat yang mengandung perintah disebut?", options: ["Kalimat Tanya", "Kalimat Berita", "Kalimat Seru", "Kalimat Perintah"], answer: "Kalimat Perintah"},
      {q: "Teks yang menjelaskan suatu hal disebut?", options: ["Teks Eksposisi", "Teks Puisi", "Teks Narasi", "Teks Fabel"], answer: "Teks Eksposisi"},
      {q: "Kata 'keindahan' berasal dari kata dasar?", options: ["Indah", "Kehidupan", "Bagus", "Senang"], answer: "Indah"},
      {q: "Cerita yang bersifat nyata disebut?", options: ["Mitos", "Fiksi", "Nonfiksi", "Fabel"], answer: "Nonfiksi"},
      {q: "Tanda baca setelah sapaan dalam surat adalah?", options: ["Titik", "Koma", "Tanda Tanya", "Tanda Seru"], answer: "Koma"},
      {q: "Pantun memiliki rima?", options: ["a-b-a-b", "a-a-a-a", "a-b-c-d", "a-b-b-a"], answer: "a-b-a-b"}
    ],
    english: [
      {q: "What is the English word for 'kucing'?", options: ["Dog", "Cat", "Mouse", "Fish"], answer: "Cat"},
      {q: "Which one is a fruit?", options: ["Carrot", "Potato", "Apple", "Onion"], answer: "Apple"},
      {q: "What is the opposite of 'big'?", options: ["Small", "Tall", "Long", "Short"], answer: "Small"},
      {q: "What color is the sky on a clear day?", options: ["Red", "Blue", "Green", "Yellow"], answer: "Blue"},
      {q: "How do you say 'selamat pagi' in English?", options: ["Good night", "Goodbye", "Good morning", "Good afternoon"], answer: "Good morning"},
      {q: "What number comes after ten?", options: ["Nine", "Eleven", "Eight", "Twelve"], answer: "Eleven"},
      {q: "Which one is used to write?", options: ["Pen", "Book", "Eraser", "Bag"], answer: "Pen"},
      {q: "What is the English word for 'air'?", options: ["Water", "Milk", "Juice", "Tea"], answer: "Water"},
      {q: "What do we use to eat soup?", options: ["Fork", "Knife", "Spoon", "Stick"], answer: "Spoon"},
      {q: "Which day comes after Monday?", options: ["Sunday", "Tuesday", "Wednesday", "Friday"], answer: "Tuesday"},
      {q: "Which animal says 'woof'?", options: ["Cat", "Dog", "Cow", "Bird"], answer: "Dog"},
      {q: "What is the English for 'merah'?", options: ["Green", "Red", "Yellow", "Blue"], answer: "Red"},
      {q: "Which one is a part of the body?", options: ["Chair", "Table", "Hand", "Phone"], answer: "Hand"},
      {q: "What do we wear on our feet?", options: ["Hat", "Shirt", "Shoes", "Scarf"], answer: "Shoes"},
      {q: "What is the opposite of 'happy'?", options: ["Sad", "Glad", "Excited", "Funny"], answer: "Sad"},
      {q: "Which one is a vehicle?", options: ["Car", "Pen", "Book", "Chair"], answer: "Car"},
      {q: "How many legs does a spider have?", options: ["Four", "Six", "Eight", "Ten"], answer: "Eight"},
      {q: "What is the English word for 'sekolah'?", options: ["Hospital", "Library", "School", "Market"], answer: "School"},
      {q: "What color is a banana?", options: ["Green", "Red", "Yellow", "Purple"], answer: "Yellow"},
      {q: "What do we use to see?", options: ["Ears", "Eyes", "Hands", "Mouth"], answer: "Eyes"},
      {q: "Which month comes after August?", options: ["July", "October", "September", "November"], answer: "September"},
      {q: "What do we drink when we are thirsty?", options: ["Water", "Rice", "Bread", "Soup"], answer: "Water"},
      {q: "Which animal has a long neck?", options: ["Elephant", "Tiger", "Giraffe", "Lion"], answer: "Giraffe"},
      {q: "Which one is not a color?", options: ["Pink", "Circle", "Blue", "Black"], answer: "Circle"},
      {q: "How do you say 'terima kasih' in English?", options: ["Please", "Sorry", "Hello", "Thank you"], answer: "Thank you"},
      {q: "What is the English word for 'tangan'?", options: ["Hand", "Head", "Leg", "Foot"], answer: "Hand"},
      {q: "What time do you usually sleep?", options: ["Morning", "Afternoon", "Night", "Lunch"], answer: "Night"},
      {q: "What is the opposite of 'hot'?", options: ["Cold", "Warm", "Spicy", "Boiling"], answer: "Cold"},
      {q: "What do you say when you meet someone?", options: ["Goodbye", "Excuse me", "Hello", "Thank you"], answer: "Hello"},
      {q: "Which one is a family member?", options: ["Teacher", "Mother", "Driver", "Friend"], answer: "Mother"}
    ],
    math: [
      {q: "Hasil dari 7 + 5 adalah?", options: ["10", "11", "12", "13"], answer: "12"},
      {q: "Berapakah hasil dari 9 x 3?", options: ["27", "18", "21", "24"], answer: "27"},
      {q: "Angka genap di bawah 10 adalah?", options: ["1", "3", "6", "9"], answer: "6"},
      {q: "Nilai dari 15 - 7 adalah?", options: ["7", "8", "9", "6"], answer: "8"},
      {q: "Jika Ani memiliki 4 apel dan membeli 3 lagi, berapa totalnya?", options: ["6", "7", "8", "9"], answer: "7"},
      {q: "Luas persegi dengan sisi 5 cm adalah?", options: ["20", "25", "30", "15"], answer: "25"},
      {q: "Bilangan kelipatan 5 berikutnya setelah 20 adalah?", options: ["22", "25", "30", "35"], answer: "25"},
      {q: "Setengah dari 20 adalah?", options: ["5", "8", "10", "12"], answer: "10"},
      {q: "Hasil dari 6 x 4 adalah?", options: ["20", "22", "24", "26"], answer: "24"},
      {q: "Berapakah hasil dari 100 ÷ 10?", options: ["5", "10", "15", "20"], answer: "10"},
      {q: "Bentuk jam 3 sore adalah?", options: ["03.00", "15.00", "13.00", "12.00"], answer: "15.00"},
      {q: "Sebuah segitiga memiliki berapa sisi?", options: ["2", "3", "4", "5"], answer: "3"},
      {q: "Urutan bilangan dari kecil ke besar: 7, 2, 9, 4?", options: ["7, 2, 4, 9", "2, 4, 7, 9", "4, 2, 7, 9", "9, 7, 4, 2"], answer: "2, 4, 7, 9"},
      {q: "Hasil dari 50 - 25 adalah?", options: ["20", "25", "30", "35"], answer: "25"},
      {q: "Jika 1 lusin telur = 12 butir, maka 2 lusin berapa?", options: ["20", "22", "24", "26"], answer: "24"},
      {q: "Berapakah hasil dari 8 + 7 - 5?", options: ["10", "9", "8", "11"], answer: "10"},
      {q: "Angka romawi dari 10 adalah?", options: ["X", "V", "L", "C"], answer: "X"},
      {q: "Hasil dari 6 ÷ 2 adalah?", options: ["2", "3", "4", "5"], answer: "3"},
      {q: "Berapakah seperempat dari 20?", options: ["4", "5", "6", "8"], answer: "5"},
      {q: "Jika kamu punya Rp1000 dan membeli permen Rp250, sisa uangmu adalah?", options: ["Rp500", "Rp600", "Rp700", "Rp750"], answer: "Rp750"},
      {q: "Berapa menit dalam satu jam?", options: ["30", "45", "60", "90"], answer: "60"},
      {q: "Satu kilogram sama dengan?", options: ["100 gram", "500 gram", "1000 gram", "1500 gram"], answer: "1000 gram"},
      {q: "Bangun datar yang memiliki 4 sisi sama panjang adalah?", options: ["Segitiga", "Trapesium", "Persegi", "Persegi Panjang"], answer: "Persegi"},
      {q: "Jika 5 kelereng dibagi ke 5 anak, masing-masing dapat?", options: ["0", "1", "2", "5"], answer: "1"},
      {q: "Hasil dari 9 x 9 adalah?", options: ["81", "72", "90", "99"], answer: "81"},
      {q: "Urutan bilangan ganjil: 1, 3, ..., 7, 9?", options: ["2", "4", "5", "6"], answer: "5"},
      {q: "Berapakah hasil dari 100 - 75?", options: ["20", "25", "30", "35"], answer: "25"},
      {q: "Setengah kilogram adalah?", options: ["100 gram", "250 gram", "500 gram", "750 gram"], answer: "500 gram"},
      {q: "Berapakah hasil dari 3 x 7?", options: ["21", "24", "27", "30"], answer: "21"},
      {q: "Berapakah hasil dari 10 + 20 + 30?", options: ["50", "60", "70", "80"], answer: "60"}
    ]
  },
  SMP: {
    physics: [
      {q: "Benda yang dapat menghantarkan listrik disebut?", options: ["Isolator", "Konduktor", "Gas", "Cairan"], answer: "Konduktor"},
      {q: "Gaya gravitasi membuat benda bergerak ke arah?", options: ["Atas", "Bawah", "Kanan", "Kiri"], answer: "Bawah"},
      {q: "Energi dari matahari disebut energi?", options: ["Kinetik", "Panas", "Bunyi", "Listrik"], answer: "Panas"},
      {q: "Alat untuk mengukur suhu disebut?", options: ["Penggaris", "Termometer", "Neraca", "Mikroskop"], answer: "Termometer"},
      {q: "Benda yang dapat berubah bentuk jika ditekan disebut?", options: ["Benda Keras", "Benda Lentur", "Benda Padat", "Benda Cair"], answer: "Benda Lentur"},
      {q: "Besaran yang dapat diukur disebut?", options: ["Besaran Pokok", "Besaran Turunan", "Besaran Vektor", "Besaran Skalar"], answer: "Besaran Pokok"},
      {q: "Contoh besaran pokok adalah?", options: ["Massa", "Volume", "Kecepatan", "Gaya"], answer: "Massa"},
      {q: "Besaran turunan terdiri dari?", options: ["Panjang", "Suhu", "Kecepatan", "Massa"], answer: "Kecepatan"},
      {q: "Satuan SI untuk panjang adalah?", options: ["Gram", "Meter", "Detik", "Kelvin"], answer: "Meter"},
      {q: "Besaran yang memiliki nilai dan arah disebut?", options: ["Besaran Skalar", "Besaran Vektor", "Besaran Pokok", "Besaran Ukuran"], answer: "Besaran Vektor"},
      {q: "Benda yang dapat menghantarkan listrik disebut?", options: ["Isolator", "Konduktor", "Gas", "Cairan"], answer: "Konduktor"},
      {q: "Gaya gravitasi menyebabkan benda bergerak ke arah?", options: ["Atas", "Bawah", "Samping", "Diam"], answer: "Bawah"},
      {q: "Energi yang dimiliki benda karena geraknya disebut?", options: ["Panas", "Kimia", "Kinetik", "Potensial"], answer: "Kinetik"},
      {q: "Satuan SI untuk suhu adalah?", options: ["Celcius", "Fahrenheit", "Reamur", "Kelvin"], answer: "Kelvin"},
      {q: "Alat untuk mengukur kuat arus listrik adalah?", options: ["Voltmeter", "Amperemeter", "Ohmmeter", "Termometer"], answer: "Amperemeter"},
      {q: "Besaran yang memiliki arah disebut?", options: ["Skalar", "Vektor", "Pokok", "Turunan"], answer: "Vektor"},
      {q: "Satuan gaya dalam SI adalah?", options: ["Newton", "Joule", "Watt", "Pascal"], answer: "Newton"},
      {q: "Alat untuk mengukur tekanan udara adalah?", options: ["Termometer", "Barometer", "Higrometer", "Altimeter"], answer: "Barometer"},
      {q: "Panjang merupakan besaran?", options: ["Skalar", "Turunan", "Pokok", "Vektor"], answer: "Pokok"},
      {q: "Contoh besaran turunan adalah?", options: ["Massa", "Waktu", "Gaya", "Suhu"], answer: "Gaya"},
      {q: "Energi potensial dimiliki oleh benda karena?", options: ["Geraknya", "Ketinggiannya", "Panasnya", "Massanya"], answer: "Ketinggiannya"},
      {q: "Perpindahan panas secara langsung melalui zat padat disebut?", options: ["Konveksi", "Radiasi", "Konduksi", "Evaporasi"], answer: "Konduksi"},
      {q: "Satuan energi dalam SI adalah?", options: ["Joule", "Watt", "Newton", "Volt"], answer: "Joule"},
      {q: "Hukum I Newton menjelaskan tentang?", options: ["Gaya gravitasi", "Inersia", "Aksi-reaksi", "Gaya gesek"], answer: "Inersia"},
      {q: "Hukum II Newton menyatakan bahwa gaya sama dengan?", options: ["M x V", "M x A", "F x D", "A x T"], answer: "M x A"},
      {q: "Hukum III Newton berbunyi?", options: ["Aksi = Reaksi", "F = m x a", "Setiap benda diam", "Energi kekal"], answer: "Aksi = Reaksi"},
      {q: "Gaya gesek terjadi karena adanya kontak antara?", options: ["Benda dan cahaya", "Benda dan udara", "Dua permukaan benda", "Gravitasi dan tekanan"], answer: "Dua permukaan benda"},
      {q: "Benda dikatakan bergerak jika?", options: ["Bergetar", "Berpindah posisi", "Menyala", "Berubah warna"], answer: "Berpindah posisi"},
      {q: "Alat optik yang digunakan untuk melihat benda sangat kecil?", options: ["Teleskop", "Lup", "Kaca mata", "Mikroskop"], answer: "Mikroskop"},
      {q: "Bayangan yang dibentuk oleh cermin cembung bersifat?", options: ["Nyata dan terbalik", "Maya dan diperkecil", "Nyata dan tegak", "Maya dan diperbesar"], answer: "Maya dan diperkecil"},
      {q: "Tekanan dipengaruhi oleh gaya dan?", options: ["Waktu", "Luas permukaan", "Kecepatan", "Suhu"], answer: "Luas permukaan"},
      {q: "Benda mengapung jika massa jenis benda?", options: ["Lebih besar dari zat cair", "Lebih kecil dari zat cair", "Sama dengan zat cair", "Tidak mempengaruhi"], answer: "Lebih kecil dari zat cair"},
      {q: "Bunyi tidak dapat merambat melalui?", options: ["Air", "Udara", "Logam", "Ruang hampa"], answer: "Ruang hampa"},
      {q: "Benda hitam menyerap panas lebih cepat karena?", options: ["Memantulkan cahaya", "Menyerap semua cahaya", "Mendingin", "Memantulkan panas"], answer: "Menyerap semua cahaya"},
      {q: "Perpindahan panas tanpa zat perantara disebut?", options: ["Konduksi", "Konveksi", "Radiasi", "Kondensasi"], answer: "Radiasi"},
      {q: "Usaha didefinisikan sebagai?", options: ["Gaya x waktu", "Massa x percepatan", "Gaya x perpindahan", "Energi x suhu"], answer: "Gaya x perpindahan"},
      {q: "Sumber energi utama di Bumi adalah?", options: ["Angin", "Air", "Batu bara", "Matahari"], answer: "Matahari"},
      {q: "Panel surya mengubah energi matahari menjadi?", options: ["Panas", "Gerak", "Listrik", "Kimia"], answer: "Listrik"},
      {q: "Sifat cermin datar adalah menghasilkan bayangan?", options: ["Nyata", "Tegak dan sama besar", "Terbalik", "Diperkecil"], answer: "Tegak dan sama besar"},
      {q: "Pusat massa suatu benda adalah?", options: ["Tempat paling berat", "Titik keseimbangan", "Bagian paling keras", "Bagian yang hangat"], answer: "Titik keseimbangan"},
      {q: "Satuan daya listrik adalah?", options: ["Joule", "Newton", "Watt", "Volt"], answer: "Watt"},
      {q: "Hambatan listrik dinyatakan dalam satuan?", options: ["Ohm", "Watt", "Volt", "Ampere"], answer: "Ohm"},
      {q: "Benda diam bisa bergerak jika diberikan?", options: ["Suhu", "Gaya", "Tekanan udara", "Cahaya"], answer: "Gaya"},
      {q: "Apa yang terjadi jika gaya total nol?", options: ["Benda pasti diam", "Benda pasti bergerak", "Benda dalam keadaan seimbang", "Benda mempercepat"], answer: "Benda dalam keadaan seimbang"},
      {q: "Gelombang bunyi adalah gelombang?", options: ["Transversal", "Longitudinal", "Cahaya", "Listrik"], answer: "Longitudinal"},
      {q: "Listrik statis disebabkan oleh?", options: ["Arus listrik", "Gerak konstan", "Gesekan", "Gravitasi"], answer: "Gesekan"},
      {q: "Volume benda padat dapat diukur dengan alat?", options: ["Amperemeter", "Mistar", "Termometer", "Stopwatch"], answer: "Mistar"},
      {q: "Kecepatan dapat dihitung dari?", options: ["Jarak ÷ waktu", "Massa x percepatan", "Gaya ÷ waktu", "Waktu ÷ gaya"], answer: "Jarak ÷ waktu"},
      {q: "Gaya yang menyebabkan benda jatuh ke tanah disebut?", options: ["Gesek", "Gravitasi", "Listrik", "Magnet"], answer: "Gravitasi"},
      {q: "Arus listrik mengalir dari?", options: ["Positif ke negatif", "Negatif ke positif", "Netral ke negatif", "Netral ke positif"], answer: "Positif ke negatif"}
    ],
    chemistry: [
      {q: "Atom merupakan?", options: ["Bagian terkecil dari unsur", "Campuran zat", "Zat hasil reaksi", "Zat murni"], answer: "Bagian terkecil dari unsur"},
      {q: "Unsur adalah zat yang?", options: ["Tidak bisa diuraikan", "Bisa dicampur", "Bisa diuapkan", "Selalu berwujud cair"], answer: "Tidak bisa diuraikan"},
      {q: "Air adalah contoh dari?", options: ["Unsur", "Senayawa", "Campuran", "Ion"], answer: "Senayawa"},
      {q: "Perubahan fisika ditandai dengan?", options: ["Tidak menghasilkan zat baru", "Muncul gas", "Perubahan warna", "Pembentukan endapan"], answer: "Tidak menghasilkan zat baru"},
      {q: "Contoh perubahan kimia adalah?", options: ["Es mencair", "Air menguap", "Kertas dibakar", "Es membeku"], answer: "Kertas dibakar"},
      {q: "Rumus kimia air adalah?", options: ["H2O", "CO2", "NaCl", "O2"], answer: "H2O"},
      {q: "NaCl merupakan rumus kimia dari?", options: ["Cuka", "Garam dapur", "Air", "Gula pasir"], answer: "Garam dapur"},
      {q: "Zat yang dapat menghantarkan listrik disebut?", options: ["Isolator", "Konduktor", "Plastik", "Karet"], answer: "Konduktor"},
      {q: "Logam merupakan konduktor yang?", options: ["Buruk", "Baik", "Lambat", "Netral"], answer: "Baik"},
      {q: "Senyawa terbentuk dari?", options: ["Gabungan unsur", "Gabungan larutan", "Campuran zat", "Penguapan"], answer: "Gabungan unsur"},
      {q: "Hidrogen termasuk dalam golongan?", options: ["Logam", "Nonlogam", "Metaloid", "Alkali"], answer: "Nonlogam"},
      {q: "Zat murni terdiri dari?", options: ["Unsur dan senyawa", "Campuran", "Larutan", "Ion"], answer: "Unsur dan senyawa"},
      {q: "Zat yang tidak bisa larut dalam air disebut?", options: ["Larutan", "Zat pelarut", "Endapan", "Koloid"], answer: "Endapan"},
      {q: "Bahan yang digunakan untuk menyerap air adalah?", options: ["Pasir", "Garam", "Kain", "Minyak"], answer: "Kain"},
      {q: "Asam memiliki rasa?", options: ["Asin", "Pahit", "Asam", "Manis"], answer: "Asam"},
      {q: "Basa bersifat?", options: ["Asam", "Netral", "Licin", "Asin"], answer: "Licin"},
      {q: "Indikator digunakan untuk?", options: ["Mengukur suhu", "Mengetahui pH", "Menimbang massa", "Menguapkan zat"], answer: "Mengetahui pH"},
      {q: "pH di bawah 7 menunjukkan sifat?", options: ["Asam", "Basa", "Netral", "Garam"], answer: "Asam"},
      {q: "Larutan garam bersifat?", options: ["Asam", "Basa", "Netral", "Toksik"], answer: "Netral"},
      {q: "Contoh bahan kimia berbahaya adalah?", options: ["Air", "Sabun", "Cuka", "Sianida"], answer: "Sianida"},
      {q: "Zat aditif ditambahkan untuk?", options: ["Menambah berat", "Mempercepat reaksi", "Memberi rasa atau warna", "Membekukan zat"], answer: "Memberi rasa atau warna"},
      {q: "Contoh zat aditif alami adalah?", options: ["MSG", "Pewarna sintetis", "Kunyit", "Formalin"], answer: "Kunyit"},
      {q: "Alkohol digunakan sebagai?", options: ["Bahan bakar", "Pelarut", "Pengawet", "Pemutih"], answer: "Pelarut"},
      {q: "Pemanis buatan yang paling dikenal adalah?", options: ["Garam", "Sakarin", "Gula merah", "Fruktosa"], answer: "Sakarin"},
      {q: "Gas yang menyebabkan efek rumah kaca adalah?", options: ["Nitrogen", "Oksigen", "Karbon dioksida", "Hidrogen"], answer: "Karbon dioksida"},
      {q: "Larutan garam dalam air disebut?", options: ["Suspensi", "Emulsi", "Larutan", "Koloid"], answer: "Larutan"},
      {q: "Contoh campuran homogen adalah?", options: ["Air dan minyak", "Air dan garam", "Pasir dan air", "Batu dan tanah"], answer: "Air dan garam"},
      {q: "Air hujan bersifat?", options: ["Asam", "Basa", "Netral", "Logam"], answer: "Asam"},
      {q: "Pemisahan zat berdasarkan titik didih disebut?", options: ["Filtrasi", "Distilasi", "Sublimasi", "Kristalisasi"], answer: "Distilasi"},
      {q: "Alat untuk menyaring campuran padat-cair adalah?", options: ["Corong pisah", "Penyaring", "Tabung reaksi", "Erlenmeyer"], answer: "Penyaring"},
      {q: "Bahan kimia yang menyebabkan ketergantungan disebut?", options: ["Vitamin", "Antibiotik", "Narkotika", "Mineral"], answer: "Narkotika"},
      {q: "Kimia mempelajari tentang?", options: ["Gaya", "Zat dan perubahannya", "Gerak", "Listrik"], answer: "Zat dan perubahannya"},
      {q: "Asam kuat contohnya adalah?", options: ["Asam asetat", "Asam sulfat", "Asam karbonat", "Asam benzoat"], answer: "Asam sulfat"},
      {q: "Zat yang dapat berubah warna indikator disebut?", options: ["Asam dan basa", "Gas mulia", "Logam", "Zat netral"], answer: "Asam dan basa"},
      {q: "Minuman bersoda mengandung?", options: ["Oksigen", "Nitrogen", "Karbon dioksida", "Helium"], answer: "Karbon dioksida"},
      {q: "Campuran dua logam atau lebih disebut?", options: ["Senyawa", "Alloy", "Larutan", "Suspensi"], answer: "Alloy"},
      {q: "Contoh alloy adalah?", options: ["Perak", "Kuningan", "Tembaga", "Emas"], answer: "Kuningan"},
      {q: "Zat pengawet yang tidak aman adalah?", options: ["Cuka", "Asam benzoat", "Formalin", "Garam"], answer: "Formalin"},
      {q: "Pupuk urea mengandung unsur?", options: ["Kalium", "Natrium", "Nitrogen", "Kalsium"], answer: "Nitrogen"},
      {q: "Hidrolisis adalah reaksi dengan menggunakan?", options: ["Asam", "Basa", "Air", "Garam"], answer: "Air"}
    ],
    biology: [
      {q: "Organisme yang mampu membuat makanannya sendiri disebut?", options: ["Heterotrof", "Autotrof", "Parasit", "Saprofit"], answer: "Autotrof"},
      {q: "Fotosintesis terjadi pada bagian tumbuhan yang mengandung?", options: ["Akar", "Batang", "Klorofil", "Xilem"], answer: "Klorofil"},
      {q: "Fungsi utama sistem pernapasan adalah?", options: ["Mencerna makanan", "Mengangkut oksigen", "Membuang urine", "Menghasilkan hormon"], answer: "Mengangkut oksigen"},
      {q: "Hewan yang mengalami metamorfosis sempurna contohnya?", options: ["Kucing", "Kupu-kupu", "Ayam", "Katak"], answer: "Kupu-kupu"},
      {q: "Urutan sistem organisasi kehidupan dari kecil ke besar adalah?", options: ["Organ-sel-jaringan", "Sel-jaringan-organ", "Jaringan-sel-organ", "Sel-organisme-jaringan"], answer: "Sel-jaringan-organ"},
      {q: "Fungsi stomata pada daun adalah untuk?", options: ["Mengangkut air", "Fotosintesis", "Pertukaran gas", "Menopang daun"], answer: "Pertukaran gas"},
      {q: "Organ tempat pencernaan makanan secara kimiawi pertama kali terjadi?", options: ["Mulut", "Lambung", "Usus halus", "Usus besar"], answer: "Mulut"},
      {q: "Alat ekskresi utama pada manusia adalah?", options: ["Paru-paru", "Lambung", "Ginjal", "Usus"], answer: "Ginjal"},
      {q: "Kelenjar yang menghasilkan insulin adalah?", options: ["Tiroid", "Pankreas", "Hipofisis", "Adrenal"], answer: "Pankreas"},
      {q: "Sel darah merah berfungsi untuk?", options: ["Melawan penyakit", "Membekukan darah", "Mengangkut oksigen", "Menghasilkan energi"], answer: "Mengangkut oksigen"},
      {q: "Sumber energi utama dalam rantai makanan adalah?", options: ["Hewan", "Tumbuhan", "Matahari", "Tanah"], answer: "Matahari"},
      {q: "Organ gerak pasif pada manusia adalah?", options: ["Otot", "Tulang", "Kulit", "Jantung"], answer: "Tulang"},
      {q: "Hewan ovovivipar berkembang biak dengan cara?", options: ["Bertelur", "Melahirkan", "Bertelur dan menetas dalam tubuh", "Membelah diri"], answer: "Bertelur dan menetas dalam tubuh"},
      {q: "Fungsi selaput lendir pada hidung adalah?", options: ["Menangkap cahaya", "Membunuh kuman", "Mengatur suhu", "Menyaring udara"], answer: "Menyaring udara"},
      {q: "Zat makanan yang diperlukan untuk pertumbuhan sel adalah?", options: ["Vitamin", "Protein", "Lemak", "Air"], answer: "Protein"},
      {q: "Jaringan pada tumbuhan yang berfungsi mengangkut air dan mineral adalah?", options: ["Floem", "Xilem", "Parenkim", "Epidermis"], answer: "Xilem"},
      {q: "Organisme yang menguraikan sisa makhluk hidup disebut?", options: ["Produsen", "Konsumen", "Pengurai", "Parasit"], answer: "Pengurai"},
      {q: "Organ dalam tubuh yang menyaring darah dan menghasilkan urine adalah?", options: ["Paru-paru", "Lambung", "Ginjal", "Usus"], answer: "Ginjal"},
      {q: "Zat hijau daun disebut juga?", options: ["Melanin", "Klorofil", "Hemoglobin", "Selulosa"], answer: "Klorofil"},
      {q: "Alat pernapasan serangga adalah?", options: ["Insang", "Paru-paru", "Trakea", "Kulit"], answer: "Trakea"},
      {q: "Hormon yang mengatur kadar gula darah adalah?", options: ["Adrenalin", "Testosteron", "Estrogen", "Insulin"], answer: "Insulin"},
      {q: "Perubahan dari larva menjadi pupa terjadi pada proses?", options: ["Metamorfosis", "Fotosintesis", "Respirasi", "Difusi"], answer: "Metamorfosis"},
      {q: "Bagian otak yang mengatur keseimbangan adalah?", options: ["Cerebrum", "Cerebellum", "Medulla", "Hipotalamus"], answer: "Cerebellum"},
      {q: "Proses pernapasan menghasilkan zat sisa berupa?", options: ["Oksigen", "Uap air", "Karbon dioksida", "Glukosa"], answer: "Karbon dioksida"},
      {q: "Tulang pengumpil berada di bagian tubuh?", options: ["Kaki", "Punggung", "Lengan", "Kepala"], answer: "Lengan"},
      {q: "Bagian sistem pencernaan tempat penyerapan makanan?", options: ["Mulut", "Lambung", "Usus halus", "Usus besar"], answer: "Usus halus"},
      {q: "Sel tumbuhan memiliki organel unik bernama?", options: ["Mitokondria", "Lisosom", "Kloroplas", "Nukleus"], answer: "Kloroplas"},
      {q: "Bagian darah yang berfungsi membekukan luka adalah?", options: ["Plasma", "Leukosit", "Trombosit", "Eritrosit"], answer: "Trombosit"},
      {q: "Jenis otot yang bekerja di luar kesadaran disebut?", options: ["Otot polos", "Otot rangka", "Otot lurik", "Otot sadar"], answer: "Otot polos"},
      {q: "Proses pembentukan sperma terjadi di organ?", options: ["Testis", "Prostat", "Ovarium", "Vas deferens"], answer: "Testis"},
      {q: "Vaksin berfungsi untuk?", options: ["Mengobati penyakit", "Membunuh bakteri", "Mencegah infeksi", "Menurunkan demam"], answer: "Mencegah infeksi"},
      {q: "Zat makanan penghasil energi utama adalah?", options: ["Vitamin", "Lemak", "Karbohidrat", "Protein"], answer: "Karbohidrat"},
      {q: "Hewan yang hidup di dua alam disebut?", options: ["Mamalia", "Amfibi", "Reptil", "Aves"], answer: "Amfibi"},
      {q: "Fotosintesis menghasilkan oksigen dan?", options: ["Karbohidrat", "Nitrogen", "Lemak", "Protein"], answer: "Karbohidrat"},
      {q: "Organ penglihatan manusia adalah?", options: ["Hidung", "Telinga", "Mata", "Lidah"], answer: "Mata"},
      {q: "Fungsi utama sel darah putih adalah?", options: ["Mengangkut oksigen", "Membekukan darah", "Melawan kuman", "Membawa nutrisi"], answer: "Melawan kuman"},
      {q: "Sel telur manusia dihasilkan oleh organ?", options: ["Uterus", "Ovarium", "Vagina", "Tuba fallopi"], answer: "Ovarium"},
      {q: "Kelainan tulang belakang melengkung ke samping disebut?", options: ["Lordosis", "Skoliosis", "Kifosis", "Osteoporosis"], answer: "Skoliosis"},
      {q: "Sistem saraf pusat terdiri dari?", options: ["Otak dan sumsum tulang belakang", "Otak dan jantung", "Mata dan telinga", "Kulit dan otot"], answer: "Otak dan sumsum tulang belakang"}
    ],
    indonesian: [
      { q: "Apa sinonim dari kata 'cerdas'?", options: ["Bodoh", "Pintar", "Malas", "Lambat"], answer: "Pintar" },
      { q: "Antonim dari kata 'tinggi' adalah?", options: ["Pendek", "Panjang", "Kurus", "Lebar"], answer: "Pendek" },
      { q: "Kalimat langsung ditandai dengan penggunaan?", options: ["Tanda titik", "Tanda seru", "Tanda petik", "Tanda koma"], answer: "Tanda petik" },
      { q: "Teks yang berisi kisah nyata disebut?", options: ["Fiksi", "Narasi", "Nonfiksi", "Legenda"], answer: "Nonfiksi" },
      { q: "Kata baku dari 'aktip' adalah?", options: ["Aktip", "Aktif", "Aktiv", "Aktef"], answer: "Aktif" },
      { q: "Kalimat yang menyatakan larangan biasanya diawali dengan kata?", options: ["Silakan", "Ayo", "Jangan", "Harap"], answer: "Jangan" },
      { q: "Ciri utama teks eksplanasi adalah?", options: ["Menghibur", "Menceritakan khayalan", "Menjelaskan proses", "Menampilkan tokoh"], answer: "Menjelaskan proses" },
      { q: "Sinonim dari 'indah' adalah?", options: ["Cantik", "Kotor", "Buruk", "Jelek"], answer: "Cantik" },
      { q: "Kalimat 'Ibu sedang memasak di dapur' termasuk jenis kalimat?", options: ["Berita", "Tanya", "Perintah", "Larangan"], answer: "Berita" },
      { q: "Teks prosedur berfungsi untuk?", options: ["Menghibur", "Mengkritik", "Mengarahkan", "Menceritakan"], answer: "Mengarahkan" },
      { q: "Peribahasa 'bagai pinang dibelah dua' artinya?", options: ["Berbeda", "Mirip sekali", "Berjauhan", "Bertengkar"], answer: "Mirip sekali" },
      { q: "Kata 'melihat' termasuk jenis kata?", options: ["Kata kerja", "Kata benda", "Kata sifat", "Kata bilangan"], answer: "Kata kerja" },
      { q: "Paragraf yang memiliki kalimat utama di awal disebut paragraf?", options: ["Induktif", "Deduktif", "Campuran", "Kronologis"], answer: "Deduktif" },
      { q: "Kata 'rasa' termasuk jenis kata?", options: ["Benda", "Sifat", "Kerja", "Indra"], answer: "Sifat" },
      { q: "Cerita rekaan yang panjang disebut?", options: ["Cerpen", "Novel", "Puisi", "Pantun"], answer: "Novel" },
      { q: "Kalimat efektif memiliki ciri?", options: ["Bertele-tele", "Padat dan jelas", "Panjang", "Banyak kata asing"], answer: "Padat dan jelas" },
      { q: "Antonim dari 'keras' adalah?", options: ["Lembut", "Kuat", "Tegas", "Cepat"], answer: "Lembut" },
      { q: "Teks yang berisi langkah-langkah disebut?", options: ["Narasi", "Eksposisi", "Prosedur", "Eksplanasi"], answer: "Prosedur" },
      { q: "Kalimat yang berisi pertanyaan disebut?", options: ["Berita", "Perintah", "Ajakan", "Tanya"], answer: "Tanya" },
      { q: "Makna kata 'kritis' dalam 'anak itu sangat kritis' adalah?", options: ["Sakit", "Suka bertanya", "Pandai menilai", "Berbahaya"], answer: "Pandai menilai" },
      { q: "Kalimat 'Sebaiknya kamu belajar lebih giat' termasuk?", options: ["Ajakan", "Saran", "Perintah", "Berita"], answer: "Saran" },
      { q: "Ciri teks deskripsi adalah?", options: ["Langkah-langkah", "Penilaian", "Penjelasan rinci", "Dialog"], answer: "Penjelasan rinci" },
      { q: "Kata kerja imperatif digunakan untuk?", options: ["Bercerita", "Memberi perintah", "Menjelaskan", "Menggambarkan"], answer: "Memberi perintah" },
      { q: "Kata 'di sekolah' menunjukkan keterangan?", options: ["Waktu", "Sebab", "Tempat", "Cara"], answer: "Tempat" },
      { q: "Kata 'karena' digunakan untuk menyatakan hubungan?", options: ["Waktu", "Sebab-akibat", "Perbandingan", "Tujuan"], answer: "Sebab-akibat" },
      { q: "Majas yang membandingkan dua hal secara langsung disebut?", options: ["Personifikasi", "Metafora", "Hiperbola", "Simile"], answer: "Metafora" },
      { q: "Sinonim dari 'riang' adalah?", options: ["Sedih", "Gembira", "Bingung", "Takut"], answer: "Gembira" },
      { q: "Pantun terdiri atas berapa baris?", options: ["2", "3", "4", "5"], answer: "4" },
      { q: "Teks laporan hasil observasi berisi?", options: ["Pendapat", "Fakta", "Khasiat", "Mitos"], answer: "Fakta" },
      { q: "Kata 'mereka' termasuk jenis kata?", options: ["Benda", "Ganti orang", "Keterangan", "Kerja"], answer: "Ganti orang" },
      { q: "Kalimat 'Dia membaca buku di taman.' memiliki keterangan?", options: ["Orang", "Tempat", "Benda", "Waktu"], answer: "Tempat" },
      { q: "Kata 'mampu' termasuk dalam jenis kata?", options: ["Sifat", "Benda", "Kerja", "Bilangan"], answer: "Sifat" },
      { q: "Cerita yang tidak benar atau rekaan disebut?", options: ["Fiksi", "Nonfiksi", "Realita", "Opini"], answer: "Fiksi" },
      { q: "Struktur teks eksplanasi terdiri dari?", options: ["Orientasi, komplikasi, resolusi", "Pernyataan umum, deretan penjelas, penutup", "Pembuka, isi, penutup", "Judul, isi, simpulan"], answer: "Pernyataan umum, deretan penjelas, penutup" },
      { q: "Kata yang menunjukkan jumlah disebut?", options: ["Kata kerja", "Kata benda", "Kata bilangan", "Kata sifat"], answer: "Kata bilangan" },
      { q: "Kalimat 'Ali adalah siswa yang rajin.' termasuk kalimat?", options: ["Langsung", "Tidak langsung", "Majemuk", "Tunggal"], answer: "Tunggal" },
      { q: "Puisi lama yang terdiri dari empat baris dan berima a-b-a-b adalah?", options: ["Syair", "Gurindam", "Pantun", "Puisi bebas"], answer: "Pantun" },
      { q: "Teks persuasi bertujuan untuk?", options: ["Menghibur", "Mengajak", "Menginformasikan", "Menceritakan"], answer: "Mengajak" },
      { q: "Kalimat 'Ayah pergi ke pasar tadi pagi.' memiliki keterangan waktu?", options: ["Ke pasar", "Tadi pagi", "Ayah", "Pergi"], answer: "Tadi pagi" },
      { q: "Kata 'menyapu' termasuk jenis kata?", options: ["Kerja", "Benda", "Sifat", "Bilangan"], answer: "Kerja" }
    ],
    english: [
      { q: "What is the synonym of 'happy'?", options: ["Sad", "Joyful", "Angry", "Tired"], answer: "Joyful" },
      { q: "Which word is the opposite of 'easy'?", options: ["Hard", "Soft", "Big", "Fast"], answer: "Hard" },
      { q: "She _____ to school every day.", options: ["go", "goes", "going", "gone"], answer: "goes" },
      { q: "I _____ a new book yesterday.", options: ["buy", "bought", "buys", "buying"], answer: "bought" },
      { q: "My father is _____ engineer.", options: ["an", "a", "the", "some"], answer: "an" },
      { q: "We _____ watching TV now.", options: ["was", "are", "is", "be"], answer: "are" },
      { q: "She can _____ the piano very well.", options: ["playing", "plays", "play", "played"], answer: "play" },
      { q: "Where _____ you live?", options: ["does", "is", "are", "do"], answer: "do" },
      { q: "The capital city of Indonesia is _____", options: ["Bandung", "Jakarta", "Surabaya", "Bali"], answer: "Jakarta" },
      { q: "I usually _____ breakfast at 7 a.m.", options: ["have", "has", "having", "had"], answer: "have" },
      { q: "How _____ apples do you want?", options: ["much", "many", "some", "any"], answer: "many" },
      { q: "My mother is cooking in the _____", options: ["bedroom", "garage", "kitchen", "bathroom"], answer: "kitchen" },
      { q: "They _____ football every weekend.", options: ["playing", "plays", "play", "played"], answer: "play" },
      { q: "I _____ to the market tomorrow.", options: ["go", "will go", "gone", "going"], answer: "will go" },
      { q: "He is _____ than his brother.", options: ["taller", "tallest", "tall", "more tall"], answer: "taller" },
      { q: "The opposite of 'clean' is _____", options: ["neat", "dirty", "tidy", "beautiful"], answer: "dirty" },
      { q: "Which word is a noun?", options: ["quickly", "run", "beautiful", "school"], answer: "school" },
      { q: "I _____ English every day.", options: ["study", "studies", "studying", "studied"], answer: "study" },
      { q: "She _____ a doctor.", options: ["am", "are", "is", "be"], answer: "is" },
      { q: "_____ name is Dinda.", options: ["I", "Me", "My", "Mine"], answer: "My" },
      { q: "He _____ TV when I called him.", options: ["watched", "watches", "is watching", "was watching"], answer: "was watching" },
      { q: "Which one is a color?", options: ["Run", "Chair", "Red", "Hot"], answer: "Red" },
      { q: "The sun _____ in the east.", options: ["rise", "rises", "rising", "rose"], answer: "rises" },
      { q: "I have two _____", options: ["foot", "foots", "feet", "feets"], answer: "feet" },
      { q: "The plural of 'child' is _____", options: ["childs", "childes", "children", "childrens"], answer: "children" },
      { q: "A: 'How are you?' B: '_____'", options: ["Good morning", "I’m fine, thanks", "See you", "Yes, I am"], answer: "I’m fine, thanks" },
      { q: "Do you _____ coffee?", options: ["like", "likes", "liked", "liking"], answer: "like" },
      { q: "Which word is an adjective?", options: ["slow", "slowness", "slowly", "slowed"], answer: "slow" },
      { q: "There _____ a cat under the table.", options: ["are", "is", "be", "am"], answer: "is" },
      { q: "What time is it when the clock shows 08:00?", options: ["Eight o'clock", "Half past eight", "Quarter to eight", "Ten o'clock"], answer: "Eight o'clock" },
      { q: "The cat is _____ the box.", options: ["in", "on", "under", "behind"], answer: "in" },
      { q: "They _____ late yesterday.", options: ["is", "was", "are", "were"], answer: "were" },
      { q: "I _____ my homework now.", options: ["am do", "do", "am doing", "doing"], answer: "am doing" },
      { q: "We _____ to school by bike.", options: ["go", "goes", "gone", "going"], answer: "go" },
      { q: "My sister _____ reading a novel.", options: ["is", "are", "am", "was"], answer: "is" },
      { q: "Where _____ she from?", options: ["does", "is", "are", "do"], answer: "is" },
      { q: "I _____ a great time at the party last night.", options: ["has", "have", "had", "having"], answer: "had" },
      { q: "He _____ lunch when I arrived.", options: ["was eating", "is eating", "ate", "eats"], answer: "was eating" },
      { q: "_____ you like to come with us?", options: ["Shall", "Should", "Would", "Might"], answer: "Would" },
      { q: "It’s _____ today than yesterday.", options: ["colder", "cold", "coldest", "more cold"], answer: "colder" }
    ]
  },
  SMA: {
    physics: [
      {q: "Contoh soal Fisika SMA?", options: ["A", "B", "C", "D"], answer: "B"}
    ]
  }
};

// Real-time listener untuk leaderboard
db.ref('users').on('value', snapshot => {
    loadLeaderboards(); // Panggil fungsi untuk memuat leaderboard setiap kali data berubah
});

// Real-time listener untuk profil pengguna
auth.onAuthStateChanged(user => {
    if (user) {
        db.ref('users/' + user.uid).on('value', snapshot => {
            if (snapshot.exists()) {
                currentUser  = snapshot.val();
                currentUser .uid = user.uid;
                loadProfile(); // Perbarui tampilan profil
            }
        });
    }
});

function showContainer(containerId) {
    document.querySelectorAll('.container').forEach(el => el.classList.remove('active'));
    document.getElementById(containerId).classList.add('active');
}

function showPage(pageId) {
    document.querySelectorAll('#dashboard .container').forEach(el => el.classList.remove('active'));
    document.getElementById(pageId).classList.add('active');
}

function showLoading() { document.getElementById('loadingSpinner').style.display = 'block'; }
function hideLoading() { document.getElementById('loadingSpinner').style.display = 'none'; }

// =================== LOGIKA LATIHAN ===================
const subjectSelectEl = document.getElementById('subjectSelect');
const startExerciseButton = document.getElementById('startExercise');
const questionDisplay = document.getElementById('questionDisplay');

startExerciseButton.addEventListener('click', async() => {
    currentSubject = subjectSelectEl.value;
    if (!currentSubject) {
        alert('Pilih mata pelajaran dulu!');
        return;
    }
    if (!questions[currentUser .education_level][currentSubject]) {
        alert('Maaf, belum ada soal untuk mata pelajaran ini!');
        return;
    }
    if (confirm(`Kamu siap menjawab soal ${currentSubject}?`)) {
        currentQuestionIndex = 0;
        userScore = 0;
        showNextQuestion();
    }
});

function showNextQuestion() {
    const subjectQuestions = questions[currentUser .education_level][currentSubject];
    if (currentQuestionIndex >= Math.min(10, subjectQuestions.length)) {
        endExercise();
        return;
    }
    const qObj = subjectQuestions[currentQuestionIndex];
    questionDisplay.innerHTML = `
        <p>${currentQuestionIndex + 1}. ${qObj.q}</p>
        ${qObj.options.map(opt =>
            `<button class="optionBtn" data-answer="${qObj.answer}">${opt}</button>`).join('')}
    `;
    document.querySelectorAll('.optionBtn').forEach(button => {
        button.addEventListener('click', e => {
            const correctAnswer = e.target.getAttribute('data-answer');
            const selected = e.target.textContent.trim();
            if (selected === correctAnswer) {
                alert("Correct!");
                userScore += 1;
            } else {
                alert("Wrong Answer.");
            }
            currentQuestionIndex++;
            showNextQuestion();
        });
    });
}

async function endExercise() {
    alert(`Kamu selesai! Skor kamu: ${userScore}/${Math.min(10, questions[currentUser .education_level][currentSubject].length)}`);
    await db.ref(`users/${currentUser .uid}/points/${currentSubject}`)
        .transaction(val => (val || 0) + userScore);
    await db.ref(`users/${currentUser .uid}/total_score`)
        .transaction(val => (val || 0) + userScore);
    alert("Skor kamu berhasil disimpan!");
    db.ref('users/' + currentUser .uid).once('value').then(snapshot => {
        currentUser  = snapshot.val();
        currentUser .uid = auth.currentUser .uid;
        loadProfile();
        loadLeaderboards(); // Tambahkan ini agar leaderboard langsung update
    });
    questionDisplay.innerHTML = '';
}

// =================== LOGIKA AUTENTIKASI ===================
document.getElementById('loginButton').addEventListener('click', async() => {
    const email = document.getElementById('loginEmail').value.trim();
    const password = document.getElementById('loginPassword').value.trim();
    if (!email.endsWith('@atlantis.student.com')) {
        document.getElementById('loginError').innerText = "Email harus berakhiran @atlantis.student.com.";
        return;
    }
    showLoading();
    try {
        await auth.signInWithEmailAndPassword(email, password);
    } catch(error) {
        document.getElementById('loginError').innerText = error.message;
    } finally {
        hideLoading();
    }
});

document.getElementById('registerButton').addEventListener('click', async() => {
    const name = document.getElementById('name').value.trim();
    const email = document.getElementById('registerEmail').value.trim();
    const educationLevel = document.getElementById('educationLevel').value.trim();
    const password = document.getElementById('registerPassword').value.trim();
    const confirmPassword = document.getElementById('confirmPassword').value.trim();

    if (!name || !email.endsWith('@atlantis.student.com') || !educationLevel || password.length < 6 || password !== confirmPassword) {
        document.getElementById('registerError').innerText = "Periksa semua kolom dan pastikan kata sandi cocok.";
        return;
    }

    showLoading();
    try {
        const userCred = await auth.createUser WithEmailAndPassword(email, password);

        // Simpan ke database
        await db.ref('users/' + userCred.user.uid).set({
            name,
            email,
            education_level: educationLevel,
            points: { physics:0, chemistry:0, biology:0, indonesian:0, english:0, math:0 },
            total_score: 0
        });

        alert("Pendaftaran berhasil!");
        showContainer('loginScreen');
    } catch(error) {
        document.getElementById('registerError').innerText = error.message;
    } finally {
        hideLoading();
    }
});

// =================== PERUBAHAN STATUS AUTENTIKASI ===================
auth.onAuthStateChanged(user => {
    if (user) {
        showLoading();
        db.ref('users/' + user.uid).once('value')
            .then(snapshot => {
                if (snapshot.exists()) {
                    currentUser  = snapshot.val();
                    currentUser .uid = user.uid;

                    loadProfile();
                    loadLeaderboards();
                    showContainer('dashboard');
                } else {
                    alert("Data pengguna tidak ditemukan. Silakan daftar lagi.");
                    auth.signOut();
                }
            })
            .finally(hideLoading);
    } else {
        showContainer('loginScreen');
    }
});

// =================== UTILITAS MUAT ===================
function loadProfile() {
    document.getElementById('profileInfo').innerHTML = `
        <p>Nama: ${currentUser .name}</p>
        <p>Email: ${currentUser .email}</p>
        <p>Tingkat Pendidikan: ${currentUser .education_level}</p>
        <p>Poin:
            Fisika: ${currentUser .points.physics || 0},
            Kimia: ${currentUser .points.chemistry || 0},
            Biologi: ${currentUser .points.biology || 0},
            Bahasa Indonesia: ${currentUser .points.indonesian || 0},
            Bahasa Inggris: ${currentUser .points.english || 0},
            Matematika: ${currentUser .points.math || 0}
        </p>
        <p>Total Skor: ${currentUser .total_score}</p>`;
}

function loadLeaderboards() {
    const leaderboardDiv = document.getElementById('allLeaderboards');
    leaderboardDiv.innerHTML = '';
    db.ref('users').once('value').then(snapshot => {
        const data = snapshot.val();
        const subjects = ["physics","chemistry","biology","indonesian","english","math"];
        
        subjects.forEach(sub => {
            let scores = [];
            for (let uid in data) {
                const user = data[uid];
                const score = user.points && user.points[sub] ? user.points[sub] : 0;
                scores.push({ name: user.name, score });
            }
            scores.sort((a, b) => b.score - a.score);
            
            let tableRows = scores.slice(0, 10).map((user, index) =>
                `<tr><td>${index + 1}</td><td>${user.name}</td><td>${user.score}</td></tr>`).join('');

            leaderboardDiv.innerHTML += `
                <div class="leaderboard-subject">
                    <h4>${sub.toUpperCase()} Leaderboard (Top 10)</h4>
                    <table>
                        <thead><tr><th>Rank</th><th>Name</th><th>Score</th></tr></thead>
                        <tbody>${tableRows}</tbody>
                    </table>
                </div>`;
        });

        // Leaderboard Keseluruhan
        let overall = [];
        for (let uid in data) {
            const user = data[uid];
            const score = user.total_score || 0;
            overall.push({ name: user.name, score });
        }
        overall.sort((a, b) => b.score - a.score);

        let overallRows = overall.slice(0, 10).map((user, index) =>
            `<tr><td>${index + 1}</td><td>${user.name}</td><td>${user.score}</td></tr>`).join('');

        leaderboardDiv.innerHTML += `
            <div class="leaderboard-subject">
                <h3>Overall Leaderboard (Top 10)</h3>
                <table>
                    <thead><tr><th>Rank</th><th>Name</th><th>Score</th></tr></thead>
                    <tbody>${overallRows}</tbody>
                </table>
            </div>`;
    });
}

// =================== LOGIKA TOMBOL ===================
document.querySelectorAll('nav button[data-page]').forEach(button => {
    button.addEventListener('click', e => {
        showPage(button.getAttribute('data-page'));
    });
});

document.getElementById('changePasswordButton').addEventListener('click', async() => {
    const newPass = prompt("Masukkan kata sandi baru:");
    if(newPass) {
        try {
            await auth.currentUser .updatePassword(newPass);
            alert("Kata sandi diperbarui!");
        } catch(error) {
            alert(error.message);
        }
    }
});

document.getElementById('logoutButton').addEventListener('click', async() => {
    await auth.signOut();
});

document.getElementById('toggleDarkMode').addEventListener('click', () => {
    document.body.classList.toggle('dark-mode');
});

document.getElementById('showRegisterLink').addEventListener('click', e => {
    e.preventDefault();
    showContainer('registerScreen');
});

document.getElementById('showLoginLink').addEventListener('click', e => {
    e.preventDefault();
    showContainer('loginScreen');
});
</script>
<footer><p>&copy; 2023 Atlantis Academy. All rights reserved.</p></footer>
</body>
</html>
