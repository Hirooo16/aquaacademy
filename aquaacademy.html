<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Aqua Academy</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
<style>
.gradient-bg {
  background: linear-gradient(135deg, #00b4db, #0083b0);
}
.card-hover {
  transition: all 0.3s ease;
}
.card-hover:hover {
  transform: translateY(-5px);
  box-shadow: 0 10px 20px rgba(0,0,0,.1);
}
.tab-content { display: none; }
.tab-content.active { display: block; animation: fadeIn .5s; }
@keyframes fadeIn {
  from { opacity:0 } to { opacity:1 }
}
</style>
</head>
<body class="font-sans bg-gray-50">

<!-- AUTH SCREENS -->
<div id="auth-screen" class="gradient-bg min-h-screen flex items-center justify-center p-4">
  <div class="bg-white rounded-xl shadow-2xl p-8 w-full max-w-md">
    <div class="text-center mb-8">
      <h1 class="text-3xl font-bold text-gray-800">Aqua Academy</h1>
      <p class="text-gray-600 mt-2">Belajar interaktif dengan sistem leaderboard</p>
    </div>
    <div id="auth-tabs" class="mb-6 flex border-b">
      <button class="tab-btn py-2 px-4 font-medium text-blue-600 border-b-2 border-blue-600" data-tab="login">Login</button>
      <button class="tab-btn py-2 px-4 font-medium text-gray-500" data-tab="register">Register</button>
    </div>
    <div id="login-form" class="tab-content active">
      <form id="loginForm" class="space-y-4">
        <div><label>Email</label><input id="login-email" type="email" required class="w-full px-3 py-2 border rounded"/></div>
        <div><label>Password</label><input id="login-password" type="password" required class="w-full px-3 py-2 border rounded"/></div>
        <div><button type="submit" class="w-full py-2 rounded text-white bg-blue-600 hover:bg-blue-700">Login</button></div>
      </form>
    </div>
    <div id="register-form" class="tab-content">
      <form id="registerForm" class="space-y-4">
        <div><label>Email</label><input id="register-email" required type="email" class="w-full px-3 py-2 border rounded"/></div>
        <div><label>Password</label><input id="register-password" required type="password" class="w-full px-3 py-2 border rounded"/></div>
        <div><label>Confirm Password</label><input id="register-confirm" required type="password" class="w-full px-3 py-2 border rounded"/></div>
        <div><button type="submit" class="w-full py-2 rounded text-white bg-blue-600 hover:bg-blue-700">Register</button></div>
      </form>
    </div>
    <div id="auth-message" class="mt-4 text-center text-sm text-gray-600"></div>
  </div>
</div>

<!-- DASHBOARD -->
<div id="dashboard" class="hidden">
<header class="gradient-bg text-white shadow-lg">
  <div class="container mx-auto px-4 py-4 flex justify-between items-center">
    <h1 class="text-xl font-bold">Aqua Academy</h1>
    <div class="flex items-center space-x-4">
      <span id="user-email" class="text-sm"></span>
      <button id="logout-btn" class="bg-white text-blue-600 px-3 py-1 rounded hover:bg-gray-100">Logout</button>
    </div>
  </div>
</header>
<main class="container mx-auto px-4 py-8">
  <h2 class="text-2xl font-bold">Selamat Datang di Aqua Academy</h2>
  <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-4">
    <div class="card-hover bg-white rounded-xl p-6">
      <h3 class="font-semibold">SD (Sekolah Dasar)</h3><p class="text-gray-600">Materi pembelajaran untuk SD</p>
      <button class="select-level-btn w-full mt-4 py-2 rounded bg-blue-600 text-white hover:bg-blue-700" data-level="sd">Pilih Jenjang</button>
    </div>
    <div class="card-hover bg-white rounded-xl p-6">
      <h3 class="font-semibold">SMP</h3><p class="text-gray-600">Materi pembelajaran untuk SMP</p>
      <button class="select-level-btn w-full mt-4 py-2 rounded bg-green-600 text-white hover:bg-green-700" data-level="smp">Pilih Jenjang</button>
    </div>
    <div class="card-hover bg-white rounded-xl p-6">
      <h3 class="font-semibold">SMA</h3><p class="text-gray-600">Materi pembelajaran untuk SMA</p>
      <button class="select-level-btn w-full mt-4 py-2 rounded bg-purple-600 text-white hover:bg-purple-700" data-level="sma">Pilih Jenjang</button>
    </div>
  </div>
  <div id="level-content" class="hidden mt-8">
    <div class="flex space-x-4 border-b">
      <button class="level-tab font-medium text-blue-600 border-b-2 border-blue-600" data-tab="materi">Materi</button>
      <button class="level-tab font-medium text-gray-500" data-tab="soal">Soal</button>
      <button class="level-tab font-medium text-gray-500" data-tab="leaderboard">Leaderboard</button>
      <button class="level-tab font-medium text-gray-500" data-tab="diskusi">Diskusi</button>
    </div>
    <div id="materi-tab" class="tab-content active p-4">Konten Materi (Dummy)</div>
    <div id="soal-tab" class="tab-content p-4">Konten Soal (Dummy)</div>
    <div id="leaderboard-tab" class="tab-content p-4">Konten Leaderboard (Dummy)</div>
    <div id="diskusi-tab" class="tab-content p-4">
      <div id="chat-messages" class="bg-gray-100 rounded p-3 h-64 overflow-y-auto"></div>
      <div class="flex mt-2">
        <input id="chat-input" class="flex-1 rounded-l border p-2" placeholder="Ketik pesan...">
        <button id="send-btn" class="bg-blue-600 text-white rounded-r px-3">Kirim</button>
      </div>
    </div>
  </div>
</main>
</div>

<!-- JAVASCRIPT STARTS HERE -->
<script>
/** CONFIGURE YOUR FIREBASE HERE **/
const firebaseConfig = {
  apiKey: "ISI_DENGAN_API_KEY",
  authDomain: "ISI_DENGAN_AUTH_DOMAIN",
  databaseURL: "ISI_DENGAN_DATABASE_URL",
  projectId: "ISI_DENGAN_PROJECT_ID",
  storageBucket: "ISI_DENGAN_STORAGE_BUCKET",
  messagingSenderId: "ISI_DENGAN_MESSAGING_SENDER_ID",
  appId: "ISI_DENGAN_APP_ID"
};
firebase.initializeApp(firebaseConfig);

// Elements
const authScreen = document.getElementById("auth-screen");
const dashboard = document.getElementById("dashboard");
const authMessage = document.getElementById("auth-message");

const loginForm = document.getElementById("loginForm");
const registerForm = document.getElementById("registerForm");

const logoutBtn = document.getElementById("logout-btn");
const userEmailDisplay = document.getElementById("user-email");

const tabBtns = document.querySelectorAll('#auth-tabs .tab-btn');
const authTabs = {
  login: document.getElementById("login-form"),
  register: document.getElementById("register-form")
};
tabBtns.forEach(b =>
  b.addEventListener("click", e => {
    const tab = e.target.dataset.tab;
    tabBtns.forEach(btn => {
      btn.classList.toggle("border-b-2", btn.dataset.tab === tab);
      btn.classList.toggle("text-blue-600", btn.dataset.tab === tab);
      btn.classList.toggle("text-gray-500", btn.dataset.tab !== tab);
    });
    for (const key in authTabs) {
      authTabs[key].classList.toggle("active", key === tab);
    }
  })
);

// Auth Logic
loginForm.addEventListener("submit", async e => {
  e.preventDefault();
  const email = document.getElementById("login-email").value;
  const password = document.getElementById("login-password").value;
  try {
    await firebase.auth().signInWithEmailAndPassword(email, password);
  } catch (error) {
    authMessage.textContent = error.message;
  }
});
registerForm.addEventListener("submit", async e => {
  e.preventDefault();
  const email = document.getElementById("register-email").value;
  const password = document.getElementById("register-password").value;
  const confirm = document.getElementById("register-confirm").value;
  if (password !== confirm) {
    authMessage.textContent = "Password tidak cocok.";
    return;
  }
  try {
    await firebase.auth().createUserWithEmailAndPassword(email, password);
  } catch (error) {
    authMessage.textContent = error.message;
  }
});
firebase.auth().onAuthStateChanged(user => {
  if (user) {
    authScreen.classList.add("hidden");
    dashboard.classList.remove("hidden");
    userEmailDisplay.textContent = user.email;
  } else {
    authScreen.classList.remove("hidden");
    dashboard.classList.add("hidden");
  }
});
logoutBtn.addEventListener("click", async () => {
  await firebase.auth().signOut();
});

// Dashboard Logic
const selectLevelButtons = document.querySelectorAll(".select-level-btn");
const levelContent = document.getElementById("level-content");
selectLevelButtons.forEach(button =>
  button.addEventListener("click", e => {
    levelContent.classList.remove("hidden");
  })
);

// Level Tabs
const levelTabs = document.querySelectorAll(".level-tab");
levelTabs.forEach(tab =>
  tab.addEventListener("click", e => {
    const selected = e.target.dataset.tab;
    levelTabs.forEach(t =>
      t.classList.toggle("text-blue-600", t.dataset.tab === selected) );
    document.querySelectorAll('#level-content .tab-content')
      .forEach(content =>
        content.classList.toggle("active", content.id === selected + '-tab')
      );
  })
);

// Chat Dummy
const chatMessages = document.getElementById("chat-messages");
const chatInput = document.getElementById("chat-input");
const sendBtn = document.getElementById("send-btn");
sendBtn.addEventListener("click", () => {
  if (chatInput.value.trim() === "") return;
  const div = document.createElement("div");
  div.textContent = chatInput.value.trim();
  div.className = "bg-blue-100 p-2 rounded my-1";
  chatMessages.appendChild(div);
  chatInput.value = ""; 
  chatMessages.scrollTop = chatMessages.scrollHeight;
});
</script>
</body>
</html>
